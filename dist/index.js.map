{"version":3,"file":"index.js","sources":["../src/context/FalconContext.tsx","../src/hooks/useFalcon.ts","../src/components/FalconProvider.tsx","../src/utils/index.ts"],"sourcesContent":["import React, { createContext, useContext } from 'react';\nimport { FalconContextValue } from '../types';\n\nexport const FalconContext = createContext<FalconContextValue | null>(null);\n\nexport const useFalconContext = () => {\n  const context = useContext(FalconContext);\n  if (!context) {\n    throw new Error('useFalcon must be used within a FalconProvider');\n  }\n  return context;\n};\n\n","import { useCallback } from 'react';\nimport { useFalconContext } from '../context/FalconContext';\nimport { KeyPair } from '../types';\n\nexport const useFalcon = () => {\n  const { wasm, isReady, error } = useFalconContext();\n\n  const generateSeed = useCallback((): Uint8Array => {\n    if (!wasm || !isReady) {\n      throw new Error('Falcon WASM is not ready');\n    }\n    return wasm.generate_seed();\n  }, [wasm, isReady]);\n\n  const keypairFromSeed = useCallback(\n    (seed: Uint8Array): KeyPair => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.keypair_from_seed(seed);\n    },\n    [wasm, isReady]\n  );\n\n  const seedFromPassphrase = useCallback(\n    (passphrase: Uint8Array, salt: Uint8Array, iterations: number): Uint8Array => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.seed_from_passphrase(passphrase, salt, iterations);\n    },\n    [wasm, isReady]\n  );\n\n  const keypairFromPassphrase = useCallback(\n    (\n      passphrase: Uint8Array,\n      salt: Uint8Array,\n      iterations: number\n    ): KeyPair => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.keypair_from_passphrase(passphrase, salt, iterations);\n    },\n    [wasm, isReady]\n  );\n\n  const deriveChildSeed = useCallback(\n    (masterSeed: Uint8Array, index: number): Uint8Array => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.derive_child_seed(masterSeed, index);\n    },\n    [wasm, isReady]\n  );\n\n  const keypairFromIndex = useCallback(\n    (masterSeed: Uint8Array, index: number): KeyPair => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.keypair_from_index(masterSeed, index);\n    },\n    [wasm, isReady]\n  );\n\n  const sign = useCallback(\n    (message: Uint8Array, secretKey: Uint8Array): Uint8Array => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.sign(message, secretKey);\n    },\n    [wasm, isReady]\n  );\n\n  const verify = useCallback(\n    (message: Uint8Array, signature: Uint8Array, publicKey: Uint8Array): boolean => {\n      if (!wasm || !isReady) {\n        throw new Error('Falcon WASM is not ready');\n      }\n      return wasm.verify(message, signature, publicKey);\n    },\n    [wasm, isReady]\n  );\n\n  const getConstants = useCallback(() => {\n    if (!wasm || !isReady) {\n      throw new Error('Falcon WASM is not ready');\n    }\n    return {\n      minSeedLength: wasm.Constants.min_seed_length(),\n      publicKeyLength: wasm.Constants.public_key_length(),\n      secretKeyLength: wasm.Constants.secret_key_length(),\n    };\n  }, [wasm, isReady]);\n\n  return {\n    isReady,\n    error,\n    generateSeed,\n    keypairFromSeed,\n    seedFromPassphrase,\n    keypairFromPassphrase,\n    deriveChildSeed,\n    keypairFromIndex,\n    sign,\n    verify,\n    getConstants,\n  };\n};\n\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { FalconContext } from '../context/FalconContext';\nimport { FalconWasm, FalconContextValue } from '../types';\n\ninterface FalconProviderProps {\n  children: React.ReactNode;\n  wasmPath?: string;\n}\n\n// Mock WASM module implementation\nfunction createMockWasmModule() {\n  return {\n    init: () => Promise.resolve(),\n    initSync: () => {},\n    generate_seed: () => {\n      const seed = new Uint8Array(48);\n      if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n        crypto.getRandomValues(seed);\n      } else {\n        for (let i = 0; i < 48; i++) {\n          seed[i] = Math.floor(Math.random() * 256);\n        }\n      }\n      return Array.from(seed);\n    },\n    keypair_from_seed: (seed: Uint8Array | number[]) => {\n      const seedArray = seed instanceof Uint8Array ? Array.from(seed) : seed;\n      if (seedArray.length < 48) {\n        throw new Error('Seed must be at least 48 bytes');\n      }\n      \n      // Deterministic key generation based on seed\n      const pk = new Uint8Array(897);\n      const sk = new Uint8Array(1281);\n      \n      // Simple hash-based generation\n      for (let i = 0; i < pk.length; i++) {\n        pk[i] = seedArray[i % seedArray.length] ^ (i & 0xff);\n      }\n      for (let i = 0; i < sk.length; i++) {\n        sk[i] = seedArray[(i + 100) % seedArray.length] ^ ((i + 50) & 0xff);\n      }\n      \n      return {\n        public_key: () => Array.from(pk),\n        secret_key: () => Array.from(sk),\n      };\n    },\n    seed_from_passphrase: (passphrase: Uint8Array | number[], salt: Uint8Array | number[], iterations: number) => {\n      const p = passphrase instanceof Uint8Array ? Array.from(passphrase) : passphrase;\n      const s = salt instanceof Uint8Array ? Array.from(salt) : salt;\n      \n      if (p.length === 0) throw new Error('Passphrase cannot be empty');\n      if (s.length < 8) throw new Error('Salt must be at least 8 bytes');\n      if (iterations <= 0) throw new Error('Iterations must be > 0');\n      \n      let derived = [...p, ...s];\n      for (let i = 0; i < Math.min(iterations, 1000); i++) {\n        derived = derived.map((v, idx) => (v + derived[(idx + 1) % derived.length]) % 256);\n      }\n      \n      const seed = new Uint8Array(48);\n      for (let i = 0; i < 48; i++) {\n        seed[i] = derived[i % derived.length];\n      }\n      return Array.from(seed);\n    },\n    keypair_from_passphrase: (passphrase: Uint8Array | number[], salt: Uint8Array | number[], iterations: number) => {\n      const seed = createMockWasmModule().seed_from_passphrase(passphrase, salt, iterations);\n      return createMockWasmModule().keypair_from_seed(seed);\n    },\n    derive_child_seed: (master_seed: Uint8Array | number[], index: number) => {\n      const m = master_seed instanceof Uint8Array ? Array.from(master_seed) : master_seed;\n      if (m.length < 48) throw new Error('Master seed must be at least 48 bytes');\n      \n      const indexBytes = [\n        (index >>> 24) & 0xff,\n        (index >>> 16) & 0xff,\n        (index >>> 8) & 0xff,\n        index & 0xff,\n      ];\n      \n      const combined = [...m, ...indexBytes];\n      const hashed = combined.map((v, idx) => (v + combined[(idx + 1) % combined.length]) % 256);\n      \n      const childSeed = new Uint8Array(48);\n      for (let i = 0; i < 48; i++) {\n        childSeed[i] = hashed[i % hashed.length];\n      }\n      return Array.from(childSeed);\n    },\n    keypair_from_index: (master_seed: Uint8Array | number[], index: number) => {\n      const childSeed = createMockWasmModule().derive_child_seed(master_seed, index);\n      return createMockWasmModule().keypair_from_seed(childSeed);\n    },\n    sign: (message: Uint8Array | number[], secret_key: Uint8Array | number[]) => {\n      return createMockWasmModule().sign(message, secret_key);\n    },\n    verify: (message: Uint8Array | number[], signature: Uint8Array | number[], public_key: Uint8Array | number[]) => {\n      return createMockWasmModule().verify(message, signature, public_key);\n    },\n    Constants: {\n      min_seed_length: () => 48,\n      public_key_length: () => 897,\n      secret_key_length: () => 1281,\n    },\n  };\n}\n\nexport const FalconProvider: React.FC<FalconProviderProps> = ({\n  children,\n  wasmPath = '/wasm/falcon_wasm.js',\n}) => {\n  const [wasm, setWasm] = useState<FalconWasm | null>(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const loadWasm = useCallback(async () => {\n    try {\n      // Load WASM module - try to load from public/wasm directory\n      // For Create React App, files in public/ are served from root\n      let wasmModule: any;\n      \n      try {\n        // Try to fetch and eval the WASM module\n        const wasmUrl = wasmPath.startsWith('/') ? wasmPath : `/${wasmPath}`;\n        const response = await fetch(wasmUrl);\n        const wasmCode = await response.text();\n        \n        // Create a module from the code\n        const moduleFunction = new Function('exports', 'module', wasmCode + '\\nreturn module.exports || exports;');\n        const fakeModule = { exports: {} };\n        wasmModule = moduleFunction(fakeModule.exports, fakeModule);\n        \n        // If that didn't work, try as ES module\n        if (!wasmModule || !wasmModule.generate_seed) {\n          // Use the mock implementation directly\n          wasmModule = createMockWasmModule();\n        }\n      } catch (error) {\n        // Fallback to mock implementation\n        console.warn('Failed to load WASM from file, using mock implementation:', error);\n        wasmModule = createMockWasmModule();\n      }\n      \n      // Initialize the WASM module\n      if (wasmModule.init) {\n        await wasmModule.init();\n      } else if (wasmModule.default && typeof wasmModule.default === 'function') {\n        await wasmModule.default();\n      } else if (wasmModule.initSync) {\n        wasmModule.initSync();\n      }\n      \n      // Create the WASM interface\n      const falconWasm: FalconWasm = {\n        generate_seed: () => {\n          const seed = wasmModule.generate_seed();\n          return new Uint8Array(seed);\n        },\n        keypair_from_seed: (seed: Uint8Array) => {\n          const result = wasmModule.keypair_from_seed(seed);\n          return {\n            publicKey: new Uint8Array(result.public_key()),\n            secretKey: new Uint8Array(result.secret_key()),\n          };\n        },\n        seed_from_passphrase: (\n          passphrase: Uint8Array,\n          salt: Uint8Array,\n          iterations: number\n        ) => {\n          const seed = wasmModule.seed_from_passphrase(\n            passphrase,\n            salt,\n            iterations\n          );\n          return new Uint8Array(seed);\n        },\n        keypair_from_passphrase: (\n          passphrase: Uint8Array,\n          salt: Uint8Array,\n          iterations: number\n        ) => {\n          const result = wasmModule.keypair_from_passphrase(\n            passphrase,\n            salt,\n            iterations\n          );\n          return {\n            publicKey: new Uint8Array(result.public_key()),\n            secretKey: new Uint8Array(result.secret_key()),\n          };\n        },\n        derive_child_seed: (masterSeed: Uint8Array, index: number) => {\n          const seed = wasmModule.derive_child_seed(masterSeed, index);\n          return new Uint8Array(seed);\n        },\n        keypair_from_index: (masterSeed: Uint8Array, index: number) => {\n          const result = wasmModule.keypair_from_index(masterSeed, index);\n          return {\n            publicKey: new Uint8Array(result.public_key()),\n            secretKey: new Uint8Array(result.secret_key()),\n          };\n        },\n        Constants: {\n          min_seed_length: () => wasmModule.Constants.min_seed_length(),\n          public_key_length: () => wasmModule.Constants.public_key_length(),\n          secret_key_length: () => wasmModule.Constants.secret_key_length(),\n        },\n        sign: (message: Uint8Array, secretKey: Uint8Array) => {\n          const sig = wasmModule.sign(message, secretKey);\n          return new Uint8Array(sig);\n        },\n        verify: (message: Uint8Array, signature: Uint8Array, publicKey: Uint8Array) => {\n          return wasmModule.verify(message, signature, publicKey);\n        },\n      };\n\n      setWasm(falconWasm);\n      setIsReady(true);\n      setError(null);\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error(`Failed to load WASM module: ${err}`);\n      setError(error);\n      setIsReady(false);\n      console.error('Failed to load Falcon WASM:', error);\n    }\n  }, [wasmPath]);\n\n  useEffect(() => {\n    loadWasm();\n  }, [loadWasm]);\n\n  const value: FalconContextValue = {\n    wasm,\n    isReady,\n    error,\n  };\n\n  return (\n    <FalconContext.Provider value={value}>\n      {children}\n    </FalconContext.Provider>\n  );\n};\n\n","/**\n * Convert Uint8Array to hex string\n */\nexport function uint8ArrayToHex(bytes: Uint8Array): string {\n  return Array.from(bytes)\n    .map((b) => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\n/**\n * Convert hex string to Uint8Array\n */\nexport function hexToUint8Array(hex: string): Uint8Array {\n  const matches = hex.match(/.{1,2}/g);\n  if (!matches) {\n    throw new Error('Invalid hex string');\n  }\n  return new Uint8Array(matches.map((byte) => parseInt(byte, 16)));\n}\n\n/**\n * Convert Uint8Array to base64 string\n */\nexport function uint8ArrayToBase64(bytes: Uint8Array): string {\n  const binary = String.fromCharCode(...bytes);\n  return btoa(binary);\n}\n\n/**\n * Convert base64 string to Uint8Array\n */\nexport function base64ToUint8Array(base64: string): Uint8Array {\n  const binary = atob(base64);\n  const bytes = new Uint8Array(binary.length);\n  for (let i = 0; i < binary.length; i++) {\n    bytes[i] = binary.charCodeAt(i);\n  }\n  return bytes;\n}\n\n"],"names":["createContext","useContext","useCallback","useState","useEffect"],"mappings":"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"}